<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head><script type="text/javascript" src="../page_head.js"></script>

<h3><a href="../program.htm">程式語言</a> - Visual C++ 6.0 - Microsoft Fundation Class (MFC) - <b>Hello, world!</b></h3>
<hr size="1"><br>
<p>
main.cpp
</p>
<pre class="brush:cpp">
#include &lt;afxwin.h&gt;
  
class CMyApp : public CWinApp
{
public:
    BOOL InitInstance() {
        AfxMessageBox("Hello, world!");
        return FALSE;
    }
};
  
CMyApp myApp;
</pre><br>

<p>
main.mak
</p>
<pre>
OUTDIR   = Debug
TARGET   = main
CPP      = cl.exe
CXXFLAGS = /nologo /MDd /W3 /Gm /GX /ZI /Od /D "WIN32" /D "_DEBUG" /D "_WINDOWS" /D "_AFXDLL" /D "_MBCS" /Fo"$(OUTDIR)\\" /Fd"$(OUTDIR)\\" /FD /GZ /c

LD       = link.exe
LDFLAGS  = /nologo /subsystem:windows /incremental:yes /pdb:"$(OUTDIR)\$(TARGET).pdb" /debug /machine:I386 /out:"$(OUTDIR)\$(TARGET).exe" /pdbtype:sept

OBJS     = "$(OUTDIR)\$(TARGET).obj"

all:
	if not exist "$(OUTDIR)/$(NULL)" mkdir "$(OUTDIR)"
	$(CPP) $(CXXFLAGS) $(TARGET).cpp
	$(LD) $(LDFLAGS) $(OBJS)

clean:
	rmdir /s /q $(OUTDIR)
</pre><br>

<p>
編譯、執行
</p>
<pre>
$ export WINEPREFIX=/home/user/.wine_amd64

$ box86 wine nmake -f main.mak clean
$ box86 wine nmake -f main.mak
$ box86 wine Debug/main.exe
</pre><br>

<p>
完成<br>
<img style="border:0px" src="vc_mfc_hello/1.jpg" class="maxSize">
</p>

<br><script type="text/javascript" src="../tail.js"></script>
