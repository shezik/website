<!--
 ____________________________________________________________
|                                                            |
|    DESIGN + Pat Heard { http://fullahead.org }             |
|      DATE + 2006.09.12                                     |
| COPYRIGHT + Free use if this notice is kept in place.      |
|____________________________________________________________|

-->

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
  <title>司徒的教學網站</title>
  <meta http-lowast="content-type" content="application/xhtml+xml; charset=UTF-8" />
  <meta name="author" content="fullahead.org" />
  <meta name="keywords" content="XHTML, CSS, template, FullAhead" />
  <meta name="description" content="A valid, XHTML 1.0 template" />
  <meta name="robots" content="index, follow, noarchive" />
  <meta name="googlebot" content="noarchive" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes, minimum-scale=0.1, maximum-scale=100.0"/>

  <link rel="shortcut icon" href="../../website.ico">
  <link rel="stylesheet" type="text/css" href="../../styles/shCore.css" />
  <link rel="stylesheet" type="text/css" href="../../styles/shThemeDefault.css" />
  <link rel="stylesheet" type="text/css" href="../../css/html.css" media="screen, projection, tv " />
  <link rel="stylesheet" type="text/css" href="../../css/layout.css" media="screen, projection, tv" />
  <link rel="stylesheet" type="text/css" href="../../css/print.css" media="print" />
  
  <script type="text/javascript" src="../../scripts/shCore.js"></script>
  <script type="text/javascript" src="../../scripts/shBrushCpp.js"></script>

  <!-- Conditional comment to apply opacity fix for IE #content background.
       Invalid CSS, but can be removed without harming design -->
  <!--[if gt IE 5]>
  <link rel="stylesheet" type="text/css" href="css/ie.css" media="screen, projection, tv " />
  <![endif]-->
</head>

<body>
<script type="text/javascript">SyntaxHighlighter.all();</script>
<div id="wrapper">
<div id="content">
<script type="text/javascript" src="../../header.js"></script>
<div id="page">
<h3>RDA8810PL</h3>
<p><b>build buildroot</b></p>
<hr size="1">
<p>
參考資訊：<br>
1. <a href="http://www.orangepi.org/downloadresources/">images</a><br><br>

Buildroot
</p>
<pre>
$ cd
$ wget https://buildroot.org/downloads/buildroot-2018.02.9.tar.gz
$ tar xvf buildroot-2018.02.9.tar.gz
$ cd buildroot-2018.02.9
$ make menuconfig
</pre>

<p>
<img src="build_buildroot/1.jpg" class="maxSize"><br><br>

Rootfs<br>
1. 使用DD製作SDCard開機片(Armbian_5.27_Orangepi2g-iot_Debian_jessie_default_3.10.62.img)<br>
2. 刪除Partition 2的var資料夾<br>
3. 把rootfs.tar.gz解壓縮到Partition 2<br>
4. 設定SDCard Boot Jumper<br>
5. 插入SDCard開機<br><br>

Baudrate: 921600bps
</p>
<pre>
RDA8810 Boot_ROM V1.6
HW_CFG: 4286
SW_CFG: 0000
Load EMMC
Open eMMC
EMMC OCR timeout
Open eMMC card Failed
Load EMMC Fail
Load SD
Open SD card
mcd_Open
Card is SDHC
Inserted Card is a SD card
mcd_Open Done
Loading image from SD card ................................................................................................Done
Check Image ... Done
Run ...
Init Clock ...
Clock config ver: 1.0
PMU vbuck1 = 9, vbuck3 = 10
setup ddr vtt to 1
setup ddr vtt to 1
setup ddr vtt to 1
setup ddr vtt to 1
setup ddr vtt to 1
setup ddr vtt to 1
setup ddr vtt to 1
setup ddr vtt to 1
setup ddr vtt to 1


rda2 stand for dqs_prsel_preset 
rda2=0 rda2=1 rda2=2 rda2=3 rda2=4 rda2=5 rda2=6 rda2=7
   R      R      R      R      *      *      R      R   
Please check the result and choose the best one
 final rda2= 0, rda2_old = 2 
setup ddr vtt to 1
pll freq CPU = 988
pll freq BUS = 800
pll freq MEM = 260
Init DDR, flag = 0x0002, para = 0x00001338
32bit dll-on Mode ...
ddr2 phy init done!
format ctrl value: 22000202
address ctrl value: 30301
decode ctrl value: 10
dram init done ...
Done
SETTING SECURITY CONTEXT
Board security: Not present
Init emmc ...
MMC: registered mmc interface 0
Spl init emmc first, use default zero mclk adj and inv.
MMC: registered mmc interface 1
raise: Signal # 8 caught
ERROR: v7_dcache_inval_range - stop address is not aligned - 0x0010f948
-------------MMC information-----------
Manufacturer ID: 3,  Name: Unknown 
OEM: 5344
Tran Speed: 25000000
Rd Block Len: 512
SD version 3.0
High Capacity: Yes
Capacity: Bus Width: 4-bit
-----------------------------------------
boot_mmc mfr id = 3 
EMMC boot ...
Check Image ...Verify image:
 Done


U-Boot 2012.04.442-rel5.0.2 (Apr 23 2017 - 17:38:39)

RDA8810 SoC
Board: RDA8810
DRAM:  236 MiB
CPU: enable instruction caches
CPU: enable data caches
CPU: enable neon
CPU:   p15-c1-c1 (NSACR): 0x00000000 -> 0x00000c00
CPU:   p15-c1-c0 (CPACR): 0x00000000 -> 0x00f00000
NAND:  metal 28 hwcfg 4286, use eMMC, skip nand init
0 MiB
MMC:   MMC: registered mmc interface 0
Cannot find the emmc corresponding mclk adj and inv.Now use default zero. Please add it 
MMC: registered mmc interface 1
ERROR: v7_dcache_inval_range - stop address is not aligned - 0x8dae6aa8
-------------MMC information-----------
Manufacturer ID: 3,  Name: Unknown 
OEM: 5344
Tran Speed: 25000000
Rd Block Len: 512
SD version 3.0
High Capacity: Yes
Capacity: Bus Width: 4-bit
-----------------------------------------
MMC: 0, MMC: 1
Using default environment

In:    serial
Out:   serial
Err:   serial
Hit any key to stop autoboot:  0 
Board Mux : Done. 
mmc0 is current device
Loading file "boot.scr" from mmc device 0:1 (xxa1)
976 bytes read
## Executing script at 81000000
** No boot file defined **
Loading file "uInitrd" from mmc device 0:1 (xxa1)
3091319 bytes read
Loading file "zImage" from mmc device 0:1 (xxa1)
3396584 bytes read
Loading file "modem.bin" from mmc device 0:1 (xxa1)
2097152 bytes read

## Checking Modem Code Image at 80000000 ...
   Verifying Image Header ... OK
   Image Name:   Modem raminit codes
   Image Type:   MIPS Linux Kernel Image (uncompressed)
   Data Size:    2064 Bytes = 2 KiB
   Load Address: 01c16000
   Entry Point:  81c16000
   Verifying Data Checksum ... OK
## Raminit Image Detected

## Checking Modem Code Image at 80000850 ...
   Verifying Image Header ... OK
   Image Name:   Modem work codes
   Image Type:   MIPS Linux Kernel Image (uncompressed)
   Data Size:    2003744 Bytes = 1.9 MiB
   Load Address: 02000800
   Entry Point:  82000800
   Verifying Data Checksum ... OK
## Work Image Detected
## Set modem logic base address 0x2000000

## Init mdcom ports ... Done

## Load Raminit Code to modem at 01c16000 (AP address 11c16000) ...
    pc = 81c16000
    param = 00000000
Done

## Start modem and waiting for response ... Done

## Load Work Code to modem at 02000800 (AP address 12000800) ...
    pc = 82000800
    param = 00000000
Done

## Load Calib Data to modem at Load factory from flash ...
lba size = 512
lba_start      partition_size          name
=========  ======================  ==============
     4096      67108864(     64M)  xxa1
   135168    1243611136(   1186M)  xxa2
=========  ======================  ==============
mmc partition table doesn't existLoad Failed
MOMEM EXT CALIB address 123f8000 ...
Factory already loaded
MOMEM CALIB address 123fc000 ...
Factory already loaded
MOMEM FACT address 123fe000 ...
Factory already loaded
AP FACT address 123ff000 ...

## Start modem ...

## Waiting for modem response ... Done

## Reset cause : 0x00000000

## Communication interface version : 0x00010001

## Power-on key is not pressed for normal boot.
## ****** Shutdown is needed later ******

## Init mdcom channels ... Done
## Loading init Ramdisk from Legacy Image at 83000000 ...
   Image Name:   uInitrd
   Image Type:   ARM Linux RAMDisk Image (gzip compressed)
   Data Size:    3091255 Bytes = 2.9 MiB
   Load Address: 00000000
   Entry Point:  00000000

Starting kernel ...

Uncompressing Linux... done, booting the kernel.
Loading, please wait...
Begin: Loading essential drivers ... done.
Begin: Running /scripts/init-premount ... done.
Begin: Mounting root file system ... Begin: Running /scripts/local-top ... done.
Begin: Running /scripts/local-premount ... done.
Begin: Will now check root file system ... fsck from util-linux 2.25.2
[/sbin/fsck.ext4 (1) -- /dev/mmcblk0p2] fsck.ext4 -a -C0 /dev/mmcblk0p2 
/dev/mmcblk0p2: clean, 44637/76000 files, 193407/303616 blocks
done.
done.
Begin: Running /scripts/local-bottom ... done.
Begin: Running /scripts/init-bottom ... done.
mount: mounting proc on /proc failed: Device or resource busy
Starting logging: OK
Initializing random number generator... done.
Starting system message bus: dbus[145]: Unknown group "bluetooth" in message bus configuration file
done
Starting network: OK

Welcome to MyGBA
mygba login: root

# 
</pre><br>

<p>
<br><a href="../../mcu.htm">返回上一頁</a>
</p>

</div>
</div>
</div>
</body>
</html>
